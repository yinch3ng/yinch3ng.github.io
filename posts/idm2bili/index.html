<!DOCTYPE html>
<html lang="en-us">
<title>Ind3x</title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="https://yinch3ng.github.io/css/minimal.css">
<link rel="canonical" href="https://yinch3ng.github.io/posts/idm2bili/">
<link rel="alternate" type="application/rss+xml" href="" title="Ind3x">

<header>
  
    <a href="https://yinch3ng.github.io/" class="title">Ind3x</a>
  
  
    <nav>
    
      <a href="/tags/">tags</a>
    
      <a href="/about/">about</a>
    
    </nav>
  
</header>

<article>
  <header>
    <h1>IDM download bilibili</h1>
    <time datetime="2025-04-14">2025-04-14</time>
  </header>
  <ol>
<li>
<p>下载安装IDM，添加如下下载类型（M4S, XS）</p>
<p><img src="1.JPG" alt="1"></p>
</li>
<li>
<p>然后启动chrome浏览器插件</p>
<p><img src="2.JPG" alt="2"></p>
</li>
<li>
<p>下载b站视频和音频一共两个文件，然后下载安装<a href="https://ffmpeg.org/download.html">ffmpeg</a>后执行如下命令</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>ffmpeg -i video.m4s -i audio.m4a -c copy final.mp4
</span></span><span style="display:flex;"><span><span style="color:#75715e"># -i 指定输入文件</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># -c copy 表示使用复制编码，不进行转码</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># final.mp4表示输出文件</span>
</span></span></code></pre></div></li>
<li>
<p>ffmpeg合并多个MP4视频文件</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>ffmpeg -i 1.mp4 -i 2.mp4 -filter_complex <span style="color:#e6db74">&#34;[0:v][0:a][1:v][1:a]concat=n=2:v=1:a=1[v][a]&#34;</span> -map <span style="color:#e6db74">&#34;[v]&#34;</span> -map <span style="color:#e6db74">&#34;[a]&#34;</span> final.mp4
</span></span><span style="display:flex;"><span><span style="color:#75715e"># -i 1.mp4 -i 2.mp4 指定多个输入文件</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># -filter_complex 启用复杂过滤器</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># [0:v][0:a][1:v][1:a] 分别引用每个输入文件的视频流 (v) 和音频流 (a)</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># concat=n=2:v=1:a=1 指定合并2个文件，每个文件包含1个视频流和1个音频流</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># [v][a] 合并后的视频流和音频流</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># -map &#34;[v]&#34; -map &#34;[a]&#34; 将合并后的视频和音频流映射到输出文件</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># final.mp4：输出的合并文件</span>
</span></span></code></pre></div><p>ffmpeg.bat</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bat" data-lang="bat"><span style="display:flex;"><span>@<span style="color:#66d9ef">echo</span> off
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">cls</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">TITLE</span> ffmpeg-combine-script
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>:topmenu
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">echo</span>.
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">echo</span> Input number to choose, hit Enter to quit: 
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">echo</span> ==========================================
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">echo</span> 1. combine video+audio
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">echo</span> 2. combine 1.video+2.video
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">echo</span> 3. convert audio
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">echo</span> ==========================================
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">echo</span>. 
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">set</span> <span style="color:#66d9ef">/p</span> _input=Please enter number: || <span style="color:#66d9ef">Set</span> _input=NothingChosen
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">If</span> <span style="color:#e6db74">&#34;</span>%_input%<span style="color:#e6db74">&#34;</span><span style="color:#f92672">==</span><span style="color:#e6db74">&#34;NothingChosen&#34;</span> <span style="color:#66d9ef">goto</span> exit
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">If</span> <span style="color:#66d9ef">/i</span> <span style="color:#e6db74">&#34;</span>%_input%<span style="color:#e6db74">&#34;</span><span style="color:#f92672">==</span><span style="color:#e6db74">&#34;1&#34;</span> <span style="color:#66d9ef">goto</span> sub_1
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">If</span> <span style="color:#66d9ef">/i</span> <span style="color:#e6db74">&#34;</span>%_input%<span style="color:#e6db74">&#34;</span><span style="color:#f92672">==</span><span style="color:#e6db74">&#34;2&#34;</span> <span style="color:#66d9ef">goto</span> sub_2
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">If</span> <span style="color:#66d9ef">/i</span> <span style="color:#e6db74">&#34;</span>%_input%<span style="color:#e6db74">&#34;</span><span style="color:#f92672">==</span><span style="color:#e6db74">&#34;3&#34;</span> <span style="color:#66d9ef">goto</span> sub_3
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">echo</span> Please type a valid number (1 ~ 3)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">goto</span>:topmenu
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>:sub_1
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">cls</span>
</span></span><span style="display:flex;"><span>ffmpeg -i 1.mp4 -i 2.m4a -c copy final.mp4
</span></span><span style="display:flex;"><span>ffmpeg -i 1.mp4 -i 2.mp4 -c copy final.mp4
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">goto</span>:topmenu
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>:sub_2
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">cls</span>
</span></span><span style="display:flex;"><span>ffmpeg -i 1.mp4 -i 2.mp4 -filter_complex <span style="color:#e6db74">&#34;[0:v][0:a][1:v][1:a]concat=n=2:v=1:a=1[v][a]&#34;</span> -map <span style="color:#e6db74">&#34;[v]&#34;</span> -map <span style="color:#e6db74">&#34;[a]&#34;</span> final.mp4
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">goto</span>:topmenu
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>:sub_3
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">cls</span>
</span></span><span style="display:flex;"><span>ffmpeg -i 1.aac -codec copy final.m4a
</span></span><span style="display:flex;"><span>ffmpeg -i 1.m4a -codec copy final.m4a
</span></span><span style="display:flex;"><span>:<span style="color:#75715e">:FOR %F IN (*.m4a) DO ffmpeg -i &#34;%F&#34; -codec copy &#34;%~nF.m4a&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">goto</span>:topmenu
</span></span></code></pre></div></li>
</ol>

</article>



</html>
